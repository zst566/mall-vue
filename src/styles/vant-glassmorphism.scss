// Vant UI 玻璃拟态主题覆盖
@use './variables.scss' as *;
@use './mixins.scss' as *;

// Vant 按钮玻璃拟态样式
.van-button {
  // 主要按钮
  &--primary {
    @include glassmorphism-button(primary);
  }

  // 成功按钮
  &--success {
    @include glassmorphism-button(success);
  }

  // 默认按钮
  &--default {
    @include glassmorphism-button(default);
  }
}

// Vant 输入框玻璃拟态样式
.van-field {
  .van-field__control {
    @include glassmorphism-input;
  }

  // 聚焦状态
  &--focus {
    .van-field__control {
      @include glassmorphism($glass-opacity-base, $glass-blur-base, true);
      border-color: rgba(25, 137, 250, 0.5);
      box-shadow: 0 0 0 3px rgba(25, 137, 250, 0.1), $glass-shadow-base;
    }
  }
}

// Vant 弹窗玻璃拟态样式
.van-popup {
  &--round {
    @include glassmorphism-modal;
  }

  // 遮罩层
  &__overlay {
    background: rgba(0, 0, 0, 0.3);
    backdrop-filter: blur(5px);
    -webkit-backdrop-filter: blur(5px);
  }
}

// Vant 导航栏玻璃拟态样式
.van-nav-bar {
  @include glassmorphism-navbar;

  .van-nav-bar__content {
    @include glassmorphism-navbar;
  }
}

// Vant 标签栏玻璃拟态样式
.van-tabbar {
  @include glassmorphism-tabbar;

  .van-tabbar-item {
    &--active {
      .van-tabbar-item__text {
        color: $primary;
      }
    }
  }
}

// Vant 卡片玻璃拟态样式
.van-card {
  @include glassmorphism-card(base);
}

// Vant 单元格玻璃拟态样式
.van-cell {
  @include glassmorphism-card(light);
  border-bottom: $glass-border-width $glass-border-style $glass-border-color;

  &:last-child {
    border-bottom: none;
  }

  &:active {
    opacity: 0.8;
  }
}

// Vant 列表玻璃拟态样式
.van-list {
  .van-cell {
    @include glassmorphism-card(light);
  }
}

// Vant 下拉菜单玻璃拟态样式
.van-dropdown-menu {
  @include glassmorphism-card(base);

  .van-dropdown-menu__bar {
    @include glassmorphism-navbar;
  }
}

// Vant 选择器玻璃拟态样式
.van-picker {
  @include glassmorphism-card(strong);

  .van-picker__toolbar {
    @include glassmorphism-navbar;
  }
}

// Vant 动作面板玻璃拟态样式
.van-action-sheet {
  @include glassmorphism-card(strong);

  .van-action-sheet__header {
    @include glassmorphism-navbar;
  }
}

// Vant 对话框玻璃拟态样式
.van-dialog {
  @include glassmorphism-modal;

  .van-dialog__header {
    @include glassmorphism-navbar;
  }
}

// Vant 通知栏玻璃拟态样式
.van-notice-bar {
  @include glassmorphism-card(light);
}

// Vant 搜索框玻璃拟态样式
.van-search {
  @include glassmorphism-navbar;

  .van-search__content {
    @include glassmorphism-input;
  }
}

// Vant 步骤条玻璃拟态样式
.van-steps {
  .van-step {
    @include glassmorphism-card(light);
  }
}

// Vant 标签玻璃拟态样式
.van-tag {
  @include glassmorphism($glass-opacity-light, $glass-blur-light, true);
  @include border-radius($border-radius-full);
}

// Vant 徽标玻璃拟态样式
.van-badge {
  .van-badge__wrapper {
    @include glassmorphism($glass-opacity-light, $glass-blur-light, true);
  }
}

// Vant Toast 玻璃拟态样式
.van-toast {
  @include glassmorphism-card(strong);
  border-radius: $border-radius-lg !important;
  padding: $spacing-4 $spacing-6 !important;
  box-shadow: $glass-shadow-strong !important;
  backdrop-filter: blur(20px) !important;
  -webkit-backdrop-filter: blur(20px) !important;
  border: 1px solid rgba(255, 255, 255, 0.3) !important;
  min-width: 88px;
  max-width: 70%;
  
  // 确保 Toast 位置正确（默认中间）
  position: fixed !important;
  left: 50% !important;
  top: 50% !important;
  transform: translate(-50%, -50%) !important;
  z-index: 9999 !important;
  
  // 位置变体：顶部
  &--top {
    top: 20% !important;
    transform: translate(-50%, 0) !important;
  }
  
  // 位置变体：底部
  &--bottom {
    top: auto !important;
    bottom: 20% !important;
    transform: translate(-50%, 0) !important;
  }
  
  // 位置变体：中间（默认）
  &--middle {
    top: 50% !important;
    transform: translate(-50%, -50%) !important;
  }
  
  // Toast 文本样式
  .van-toast__text {
    color: $text-color-primary !important;
    font-size: $font-size-base !important;
    font-weight: $font-weight-medium !important;
    line-height: 1.5 !important;
  }
  
  // 成功类型
  &--success {
    background: rgba(76, 175, 80, 0.2) !important;
    border: 1px solid rgba(76, 175, 80, 0.4) !important;
    
    .van-toast__icon {
      color: #4caf50 !important;
    }
  }
  
  // 失败类型
  &--fail {
    background: linear-gradient(135deg, rgba(244, 67, 54, 0.28) 0%, rgba(211, 47, 47, 0.32) 100%) !important;
    border: 1.5px solid rgba(244, 67, 54, 0.55) !important;
    box-shadow: 0 8px 32px rgba(244, 67, 54, 0.35), 
                0 4px 16px rgba(244, 67, 54, 0.25),
                inset 0 1px 0 rgba(255, 255, 255, 0.25) !important;
    padding: $spacing-5 $spacing-6 !important;
    backdrop-filter: blur(24px) saturate(180%) !important;
    -webkit-backdrop-filter: blur(24px) saturate(180%) !important;
    min-width: 120px !important;
    
    .van-toast__icon {
      color: #ff5252 !important;
      font-size: 26px !important;
      margin-bottom: $spacing-2 !important;
      filter: drop-shadow(0 2px 6px rgba(244, 67, 54, 0.5)) !important;
      animation: iconPulse 0.6s ease-in-out !important;
    }
    
    .van-toast__text {
      color: #ffffff !important;
      font-size: 15px !important;
      font-weight: $font-weight-semibold !important;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.15) !important;
      letter-spacing: 0.3px !important;
      line-height: 1.4 !important;
    }
    
    // 添加轻微的震动动画效果（中间位置）
    &.van-toast--middle {
      animation: toastShakeMiddle 0.4s ease !important;
    }
    
    // 顶部位置动画
    &.van-toast--top {
      animation: toastShakeTop 0.4s ease !important;
    }
    
    // 底部位置动画
    &.van-toast--bottom {
      animation: toastShakeBottom 0.4s ease !important;
    }
  }
  
  // Toast 震动动画 - 中间位置
  @keyframes toastShakeMiddle {
    0%, 100% {
      transform: translate(-50%, -50%) scale(1);
    }
    10%, 30%, 50%, 70%, 90% {
      transform: translate(-50%, -50%) scale(1.02) translateX(-2px);
    }
    20%, 40%, 60%, 80% {
      transform: translate(-50%, -50%) scale(1.02) translateX(2px);
    }
  }
  
  // Toast 震动动画 - 顶部位置
  @keyframes toastShakeTop {
    0%, 100% {
      transform: translate(-50%, 0) scale(1);
    }
    10%, 30%, 50%, 70%, 90% {
      transform: translate(-50%, 0) scale(1.02) translateX(-2px);
    }
    20%, 40%, 60%, 80% {
      transform: translate(-50%, 0) scale(1.02) translateX(2px);
    }
  }
  
  // Toast 震动动画 - 底部位置
  @keyframes toastShakeBottom {
    0%, 100% {
      transform: translate(-50%, 0) scale(1);
    }
    10%, 30%, 50%, 70%, 90% {
      transform: translate(-50%, 0) scale(1.02) translateX(-2px);
    }
    20%, 40%, 60%, 80% {
      transform: translate(-50%, 0) scale(1.02) translateX(2px);
    }
  }
  
  // 图标脉冲动画
  @keyframes iconPulse {
    0%, 100% {
      transform: scale(1);
      opacity: 1;
    }
    50% {
      transform: scale(1.1);
      opacity: 0.9;
    }
  }
  
  // 加载类型
  &--loading {
    background: rgba(25, 137, 250, 0.2) !important;
    border: 1px solid rgba(25, 137, 250, 0.4) !important;
    padding: $spacing-6 $spacing-8 !important;
    
    .van-toast__loading {
      color: $primary !important;
    }
    
    .van-toast__text {
      margin-top: $spacing-4 !important;
    }
  }
  
  // 默认类型（文本）
  &--text {
    background: rgba(255, 255, 255, 0.2) !important;
    border: 1px solid rgba(255, 255, 255, 0.4) !important;
  }
}

// Vant Loading 玻璃拟态样式
.van-loading {
  @include glassmorphism-card(strong);
  border-radius: $border-radius-lg;
  padding: $spacing-6 $spacing-8;
  box-shadow: $glass-shadow-strong;
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  
  // Loading 文本样式
  .van-loading__text {
    color: $text-color-primary;
    font-size: $font-size-base;
    font-weight: $font-weight-medium;
    margin-top: $spacing-4;
  }
  
  // Loading 图标
  .van-loading__spinner {
    color: $primary;
  }
  
  // Loading 遮罩层
  &__overlay {
    background: rgba(0, 0, 0, 0.3);
    backdrop-filter: blur(5px);
    -webkit-backdrop-filter: blur(5px);
  }
}


// 浏览器兼容性降级
@supports not (backdrop-filter: blur(10px)) {
  .van-button,
  .van-field__control,
  .van-popup,
  .van-nav-bar,
  .van-tabbar,
  .van-card,
  .van-cell,
  .van-dialog,
  .van-toast,
  .van-loading {
    // 降级到纯色背景
    background: rgba(255, 255, 255, $glass-opacity-fallback) !important;
    backdrop-filter: none !important;
    -webkit-backdrop-filter: none !important;
  }
}


